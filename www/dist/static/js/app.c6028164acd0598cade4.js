webpackJsonp([1],{"6lmA":function(t,e){},"77eN":function(t,e){t.exports={CLIENT_ID:"7V1pVHASnLjlxJY8F7UBCBDoqsZ35aU0",CLIENT_DOMAIN:"gangplank.auth0.com",AUDIENCE:"https://log.com",REDIRECT:"com.gp.botmanager://gangplank.auth0.com/cordova/com.gp.botmanager/callback"}},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=o("VU/8")({name:"App"},a,!1,function(t){o("evEA")},null,null).exports,i=o("/ocq"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav",{staticClass:"navbar navbar-inverse navbar-fixed-top"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"navbar-header"},[e("a",{staticClass:"navbar-brand"},[this._v("Bot Manager")]),this._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{"data-toggle":"modal","data-target":"#bot-info-modal"},on:{click:this.addBot}},[this._v("\n          Add new bot\n        ")])])])])])},staticRenderFns:[]};var l=o("VU/8")({name:"TopNav",methods:{addBot:function(){this.$parent.infoMode="add"}}},r,!1,function(t){o("ZT89")},"data-v-07ea9203",null).exports,c=o("ytdl"),d=o.n(c),u=o("2fyi"),m=o.n(u),v=o("77eN"),f=o.n(v);const b=f.a.CLIENT_ID,h=f.a.CLIENT_DOMAIN,g=f.a.AUDIENCE,p=f.a.REDIRECT,_="access_token";var C=new m.a.WebAuth({clientID:b,domain:h});new i.a({mode:"history"});function w(){const t=window.localStorage.getItem(_);return!(!t||(e=t,function(t){const e=d()(t);if(!e.exp)return null;const o=new Date(0);return o.setUTCSeconds(e.exp),o}(e)<new Date));var e}var B={name:"TopNav",methods:{handleLogin:function(){C.authorize({responseType:"token id_token",redirectUri:p,audience:g})},checkToken:function(){alert("Access token: "+(w()?"true":"false"))},refresh:function(){this.$parent.getBotList()}}},k={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("nav",{staticClass:"navbar navbar-fixed-bottom"},[o("div",{staticClass:"container-fluid"},[o("button",{on:{click:t.handleLogin}},[t._v("Log in")]),t._v(" "),o("button",{on:{click:t.checkToken}},[t._v("Check token")]),t._v(" "),o("button",{on:{click:t.refresh}},[t._v("Refresh")])])])])},staticRenderFns:[]};var x=o("VU/8")(B,k,!1,function(t){o("WieT")},"data-v-a7958e4a",null).exports,N=o("fZjL"),I=o.n(N);const E=["email","msg","start","stop"];var y={name:"BotInfo",props:["infoMode","bot"],data:function(){return{editable:["email","msg","start","stop"],editCheckbox:{name:!1,email:!1,msg:!1},newBot:{name:"",email:"",msg:""},botChanges:{},deleteMode:""}},mounted:function(){var t=this;$("#bot-info-modal").on("hidden.bs.modal",function(){t.discardChanges(),$("#are-you-sure").collapse("hide"),$("textarea").css("height","15vh")}),$("#are-you-sure").on("show.bs.collapse",function(){$("#bot-info-modal").animate({scrollTop:$("#bot-info-modal").prop("scrollHeight")},400)})},methods:{setEdit:function(t){this.editCheckbox[t]?delete this.botChanges[t]:this.botChanges[t]=this.bot[t],this.editCheckbox[t]=!this.editCheckbox[t]},setDeleteMode:function(t){this.deleteMode=t},parseDate:function(t){if(!t)return"none";var e=new Date(parseInt(t));return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},discardNewBot:function(){var t=this;I()(this.newBot).forEach(function(e){t.newBot[e]=""})},discardChanges:function(){var t=this,e=I()(this.botChanges);0!=e.length&&e.forEach(function(e){delete t.botChanges[e],t.editCheckbox[e]=!1})},addNewBot:function(){!function(t){if(!t.name)return void alert("No enough data");let e=window.localStorage.getItem("bot_list");window.localStorage.setItem("bot_list",e?`${e}, ${t.name}`:t.name);for(let e in t)window.localStorage.setItem(`${t.name}_${e}`,t[e]);alert("New bot added")}(this.newBot),$("#bot-info-modal").modal("hide"),this.$parent.getBotList()},editBotInfo:function(){!function(t,e){for(let o in e)e[o]&&window.localStorage.setItem(`${t}_${o}`,e[o]);alert("Done")}(this.bot.name,this.botChanges),$("#bot-info-modal").modal("hide"),this.$parent.getBotList()},deleteBot:function(){!function(t){E.forEach(e=>{window.localStorage.removeItem(`${t}_${e}`)});let e=window.localStorage.getItem("bot_list").split(", ");window.localStorage.setItem("bot_list",e.filter(e=>e!=t).join(", ")),alert("Done")}(this.bot.name),$("#bot-info-modal").modal("hide"),this.$parent.getBotList()}}},L={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal fade",attrs:{role:"dialog",id:"bot-info-modal"}},[o("div",{staticClass:"modal-dialog"},[o("div",{staticClass:"modal-content"},[o("div",{staticClass:"modal-header"},[o("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n          Ã—\n        ")]),t._v(" "),o("h4",{staticClass:"modal-title"},[t._v("\n          "+t._s("add"==t.infoMode?"Add new bot":t.bot.name)+"\n        ")])]),t._v(" "),o("div",{staticClass:"modal-body"},["add"==t.infoMode?o("div",{staticClass:"form-horizontal"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label col-sm-2"},[t._v("\n              Name:\n            ")]),t._v(" "),o("div",{staticClass:"col-sm-8"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBot.name,expression:"newBot.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newBot.name},on:{input:function(e){e.target.composing||t.$set(t.newBot,"name",e.target.value)}}})])])]):t._e(),t._v(" "),t._l(t.editable,function(e){return o("div",{staticClass:"form-horizontal"},[o("div",{staticClass:"form-group"},[o("label",{staticClass:"control-label col-sm-2"},[t._v("\n              "+t._s(e[0].toUpperCase()+e.slice(1))+":\n            ")]),t._v(" "),o("div",{staticClass:"col-sm-8"},["add"==t.infoMode?o("input",{directives:[{name:"model",rawName:"v-model",value:t.newBot[e],expression:"newBot[item]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.newBot[e]},on:{input:function(o){o.target.composing||t.$set(t.newBot,e,o.target.value)}}}):t._e(),t._v(" "),"info"!=t.infoMode||t.editCheckbox[e]||"msg"==e?t._e():o("div",{staticClass:"form-control"},[t._v("\n                "+t._s(t.bot[e])+"\n              ")]),t._v(" "),"info"!=t.infoMode||t.editCheckbox[e]||"msg"!=e?t._e():o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.bot[e],expression:"bot[item]"}],staticClass:"form-control",attrs:{rows:"5",readonly:""},domProps:{value:t.bot[e]},on:{input:function(o){o.target.composing||t.$set(t.bot,e,o.target.value)}}}),t._v(" "),"info"==t.infoMode&&t.editCheckbox[e]&&"msg"!=e?o("input",{directives:[{name:"model",rawName:"v-model",value:t.botChanges[e],expression:"botChanges[item]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.botChanges[e]},on:{input:function(o){o.target.composing||t.$set(t.botChanges,e,o.target.value)}}}):t._e(),t._v(" "),"info"==t.infoMode&&t.editCheckbox[e]&&"msg"==e?o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.botChanges[e],expression:"botChanges[item]"}],staticClass:"form-control",attrs:{rows:"5"},domProps:{value:t.botChanges[e]},on:{input:function(o){o.target.composing||t.$set(t.botChanges,e,o.target.value)}}}):t._e()]),t._v(" "),"info"==t.infoMode?o("div",{staticClass:"col-sm-1"},[t.editCheckbox[e]?t._e():o("button",{staticClass:"btn btn-primary",on:{click:function(o){t.setEdit(e)}}},[t._v("\n                Edit\n              ")]),t._v(" "),t.editCheckbox[e]?o("button",{staticClass:"btn btn-danger",on:{click:function(o){t.setEdit(e)}}},[t._v("\n                Reset\n              ")]):t._e()]):t._e()])])})],2),t._v(" "),o("div",{staticClass:"modal-footer"},["add"==t.infoMode?o("button",{staticClass:"btn btn-primary",on:{click:t.addNewBot}},[t._v("\n          Add\n        ")]):t._e(),t._v(" "),"add"==t.infoMode?o("button",{staticClass:"btn btn-warning",on:{click:t.discardNewBot}},[t._v("\n          Discard\n        ")]):t._e(),t._v(" "),o("button",{staticClass:"btn btn-info",attrs:{"data-dismiss":"modal"}},[t._v("\n          Close\n        ")]),t._v(" "),0!=Object.keys(t.botChanges)?o("button",{staticClass:"btn btn-primary",on:{click:t.editBotInfo}},[t._v("\n          Submit changes\n        ")]):t._e(),t._v(" "),"info"==t.infoMode?o("button",{staticClass:"btn btn-danger",attrs:{"data-toggle":"collapse","data-target":"#are-you-sure"},on:{click:function(e){t.setDeleteMode("delete")}}},[t._v("\n          Delete\n        ")]):t._e(),t._v(" "),o("div",{staticClass:"collapse",attrs:{id:"are-you-sure"}},[o("p",[t._v("Are you sure ?")]),t._v(" "),"delete"==t.deleteMode?o("button",{staticClass:"btn btn-primary",on:{click:t.deleteBot}},[t._v("\n            Yes\n          ")]):t._e(),t._v(" "),o("button",{staticClass:"btn btn-danger",attrs:{"data-toggle":"collapse","data-target":"#are-you-sure"}},[t._v("\n            No\n          ")])])])])])])},staticRenderFns:[]};var M={name:"BotList",props:["botList"],methods:{displayBotInfo:function(t){for(var e in this.$parent.infoMode="info",this.botList[t])this.$parent.selectedBot[e]=this.botList[t][e]},isActive:function(t){return t.stop&&t.stop>(new Date).getTime()}}},D={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[0==t.botList.length?o("p",{staticStyle:{"text-align":"center"}},[t._v("\n    Nothing here\n  ")]):t._e(),t._v(" "),o("transition-group",{staticClass:"container-fluid",attrs:{name:"list",tag:"div"}},t._l(t.botList,function(e,n){return o("div",{key:n,staticClass:"col-xs-4 btn list-item",class:t.isActive(e)?"btn-primary":"btn-danger",attrs:{"data-toggle":"modal","data-target":"#bot-info-modal"},on:{click:function(e){t.displayBotInfo(n)}}},[o("h4",[t._v(t._s(e.name))])])}))],1)},staticRenderFns:[]};var A={name:"Dashboard",components:{TopNav:l,BottomNav:x,BotInfo:o("VU/8")(y,L,!1,function(t){o("d2FK")},"data-v-2fefd375",null).exports,BotList:o("VU/8")(M,D,!1,function(t){o("6lmA")},"data-v-7453502e",null).exports},mounted:function(){this.getBotList()},data:function(){return{infoMode:"add",botList:[],selectedBot:{name:"",email:"",msg:""}}},methods:{getBotList:function(){var t=this;this.botList=[];var e=window.localStorage.getItem("bot_list");e&&e.split(", ").forEach(function(e){t.botList.push(function(t){let e={name:t};return E.forEach(o=>{e[o]=window.localStorage.getItem(`${t}_${o}`)}),e}(e))})}}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid main-container"},[e("bot-info",{attrs:{infoMode:this.infoMode,bot:this.selectedBot}}),this._v(" "),e("top-nav"),this._v(" "),e("bot-list",{attrs:{botList:this.botList.filter(function(t){return t.name})}}),this._v(" "),e("bottom-nav")],1)},staticRenderFns:[]};var S=o("VU/8")(A,T,!1,function(t){o("Nnw7")},null,null).exports;n.a.use(i.a);var U=new i.a({routes:[{path:"/",name:"Dashboard",component:S}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:U,components:{App:s},template:"<App/>"})},Nnw7:function(t,e){},WieT:function(t,e){},ZT89:function(t,e){},d2FK:function(t,e){},evEA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c6028164acd0598cade4.js.map